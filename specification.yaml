  openapi: 3.0.3
  info:
    title: Race service
    description: The race service let you administrate the main domain objects raceplan and races
    version: '1.0'
    license:
        name: Apache 2.0
        url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
  tags:
    - name: race_plan
      description: Race plan operations
  paths:
    /raceplans:
      post:
        tags:
        - race_plan
        security:
        - bearerAuth: []
        description: Add a new race plan
        requestBody:
          description: The new race plan to be created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RacePlan'
        responses:
          201:
            description: Created
      get:
        tags:
        - race_plan
        description: Get a list of raceplans
        parameters:
        - name: event-id
          in: query
          description: the event the raceplan belongs to
          required: false
        responses:
          200:
            description: Ok
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/RacePlanCollection'
    /raceplans/generate-raceplan-for-event:
      post:
        tags:
        - race_plan
        security:
        - bearerAuth: []
        description: command to generate race plan based on event
        requestBody:
          description: input data from which to generate the plan
          content:
            application/json:
              schema:
                type: string
                format: uuid
                description: id of event to which the plan belongs
        responses:
          201:
            description: Created
    /raceplans/{racePlanId}:
      parameters:
      - name: racePlanId
        in: path
        description: race plan id
        required: true
        schema:
          type: string
          format: uuid
      get:
        tags:
        - race_plan
        description: Get a unique race plan
        responses:
          200:
            description: Ok
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/RacePlan'
      put:
        tags:
        - race_plan
        description: Update an race plan
        responses:
          204:
            description: No content
      delete:
        tags:
        - race_plan
        description: Delete a race plan
        responses:
          204:
            description: No content
    /time-events:
      post:
        tags:
        - race_plan
        security:
        - bearerAuth: []
        description: Add a new time-event
        requestBody:
          description: The new time-event to be created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TimeEvent'
        responses:
          201:
            description: Created
      get:
        tags:
        - race_plan
        description: Get a list of time-events
        parameters:
        - name: event-id
          in: query
          description: the event the time-event belongs to
          required: false
        responses:
          200:
            description: Ok
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/TimeEventCollection'
    /time-events/{eventId}:
      parameters:
      - name: eventId
        in: path
        description: Get time-events for one event
        required: true
        schema:
          type: string
          format: uuid
      get:
        tags:
        - time-event
        description: Get time-events for one event
        responses:
          200:
            description: Ok
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/TimeEvents'
      put:
        tags:
        - time-event
        description: Update a time-event
        responses:
          204:
            description: No content
      delete:
        tags:
        - race_plan
        description: Delete a time-event
        responses:
          204:
            description: No content
  components:
    schemas:
      RacePlanCollection:
        type: object
        properties:
          events:
            type: array
            items:
              $ref: '#/components/schemas/RacePlan'
      RacePlan:
        properties:
          id:
            type: string
          eventId:
            type: string
            description: reference to the event the plan is for
          races:
            type: array
            items:
              type: string
              description: ref to individual races
      TimeEventCollection:
        type: object
        properties:
          events:
            type: array
            items:
              $ref: '#/components/schemas/TimeEvent'
      TimeEvent:
        properties:
          id:
            type: string
          eventId:
            type: string
            description: reference to the event the plan is for
          races:
            type: array
            items:
              type: string
              description: ref to individual races
    securitySchemes:
      bearerAuth:
        type: http
        scheme: bearer
        bearerFormat: JWT
